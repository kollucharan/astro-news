---
const { author } = Astro.props;

// Your query returns `slug` as an object.
// Weâ€™ll prefer slug.current, fall back to _id (your getAuthorBySlug handles both).
const authorId = author?.slug?.current ?? author?._id ?? null;
const imageUrl = author?.image?.url;
---

<li class="group relative isolate mx-auto w-full">
  {imageUrl && (
    <img
      src={imageUrl}
      alt={author.name}
      loading="lazy"
      width="320"
      height="320"
      class="w-320 aspect-square max-w-full object-cover filter grayscale group-hover:grayscale-0 rounded-md"
    />
  )}

  <div class="flex flex-col gap-0.5 mt-2">
    <h3 class="text-base font-semibold group-hover:underline">
      {authorId ? (
        <a href={`/authors/${authorId}`}>
          <span class="absolute inset-0 z-10 pointer-events-none"></span>
          {author.name}
        </a>
      ) : (
        <span>{author.name}</span>
      )}
    </h3>
  </div>
</li>
